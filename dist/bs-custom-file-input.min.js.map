{"version":3,"file":"bs-custom-file-input.min.js","sources":["../src/selector.js","../src/util.js","../src/eventHandlers.js","../src/index.js"],"sourcesContent":["const Selector = {\n\tCUSTOMFILE: '.custom-file input[type=\"file\"]',\n\tCUSTOMFILELABEL: '.custom-file-label',\n\tFORM: 'form'\n}\n\nexport default Selector\n","import Selector from './selector'\n\nconst getDefaultText = (input) => {\n\tlet defaultText = ''\n\n\tif (input.parentNode) {\n\t\tconst label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n\t\tif (label) {\n\t\t\tdefaultText = label.innerHTML\n\t\t}\n\t}\n\n\treturn defaultText\n}\n\nconst restoreDefaultText = (input) => {\n\tconst defaultText = input.bsCustomFileInput.defaultText\n\n\tif (input.parentNode) {\n\t\tconst label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n\t\tif (label) {\n\t\t\tlabel.innerHTML = defaultText\n\t\t}\n\t}\n}\n\nexport {\n\tgetDefaultText,\n\trestoreDefaultText,\n}\n","import { restoreDefaultText } from './util'\nimport Selector from './selector'\n\nconst fileApi = !!window.File\n\nconst getSelectedFiles = (input) => {\n\tif (input.hasAttribute('multiple') && fileApi) {\n\t\tconst files = [].slice.call(input.files)\n\t\t\t.map((file) => file.name)\n\n\t\treturn files.join(', ')\n\t} else {\n\t\treturn input.value\n\t}\n}\n\nfunction handleInputChange() {\n\tif (this.parentNode) {\n\t\tconst label = this.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n\t\tif (label) {\n\t\t\tlabel.innerHTML = getSelectedFiles(this)\n\t\t}\n\t}\n}\n\n// Needed for keyboard users in firefox\nfunction handleFocusin() {\n\tthis.classList.add('focus')\n}\n\n// Needed for keyboard users in firefox\nfunction handleFocusout() {\n\tthis.classList.remove('focus')\n}\n\nfunction handleFormReset() {\n\tconst customFileList = [].slice.call(this.querySelectorAll(Selector.CUSTOMFILE))\n\n\tfor (let i = 0, len = customFileList.length; i < len; i++) {\n\t\trestoreDefaultText(customFileList[i])\n\t}\n}\n\nexport {\n\thandleInputChange,\n\thandleFocusin,\n\thandleFocusout,\n\thandleFormReset,\n}\n","import {\n\thandleInputChange,\n\thandleFocusin,\n\thandleFocusout,\n\thandleFormReset,\n} from './eventHandlers'\nimport { getDefaultText, restoreDefaultText } from './util'\nimport Selector from './selector'\n\nconst Event = {\n\tINPUTCHANGE   : 'change',\n\tINPUTFOCUSIN  : 'focusin',\n\tINPUTFOCUSOUT : 'focusout',\n\tFORMRESET     : 'reset',\n}\n\nconst bsCustomFileInput = {\n\tinit() {\n\t\tconst customFileInputList = [].slice.call(document.querySelectorAll(Selector.CUSTOMFILE))\n\t\tconst formList = [].slice.call(document.querySelectorAll(Selector.FORM))\n\n\t\tfor (let i = 0, len = customFileInputList.length; i < len; i++) {\n\t\t\tconst input = customFileInputList[i]\n\n\t\t\tObject.defineProperty(input, 'bsCustomFileInput', {\n\t\t\t\tvalue: {\n\t\t\t\t\tdefaultText: getDefaultText(input)\n\t\t\t\t},\n\t\t\t})\n\n\t\t\tinput.addEventListener(Event.INPUTCHANGE, handleInputChange)\n\t\t\tinput.addEventListener(Event.INPUTFOCUSIN, handleFocusin)\n\t\t\tinput.addEventListener(Event.INPUTFOCUSOUT, handleFocusout)\n\t\t}\n\n\t\tfor (let i = 0, len = formList.length; i < len; i++) {\n\t\t\tformList[i].addEventListener(Event.FORMRESET, handleFormReset)\n\t\t}\n\t},\n\n\tdestroy() {\n\t\tconst formList = [].slice.call(document.querySelectorAll(Selector.FORM))\n\t\tconst customFileInputList = [].slice.call(document.querySelectorAll(Selector.CUSTOMFILE))\n\t\t\t.filter((input) => !!input.bsCustomFileInput)\n\n\t\tfor (let i = 0, len = customFileInputList.length; i < len; i++) {\n\t\t\tconst input = customFileInputList[i]\n\n\t\t\trestoreDefaultText(input)\n\n\t\t\tinput.removeEventListener(Event.INPUTCHANGE, handleInputChange)\n\t\t\tinput.removeEventListener(Event.INPUTFOCUSIN, handleFocusin)\n\t\t\tinput.removeEventListener(Event.INPUTFOCUSOUT, handleFocusout)\n\t\t}\n\n\t\tfor (let i = 0, len = formList.length; i < len; i++) {\n\t\t\tformList[i].removeEventListener(Event.FORMRESET, handleFormReset)\n\t\t}\n\t}\n}\n\nexport default bsCustomFileInput\n"],"names":["Selector","CUSTOMFILE","CUSTOMFILELABEL","FORM","getDefaultText","input","defaultText","parentNode","label","querySelector","innerHTML","restoreDefaultText","bsCustomFileInput","fileApi","window","File","getSelectedFiles","hasAttribute","slice","call","files","map","file","name","join","value","handleInputChange","this","handleFocusin","classList","add","handleFocusout","remove","handleFormReset","customFileList","querySelectorAll","i","len","length","Event","init","customFileInputList","document","formList","Object","defineProperty","addEventListener","destroy","filter","removeEventListener"],"mappings":";;;;;6LAAA,IAAMA,EAAW,CAChBC,WAAY,kCACZC,gBAAiB,qBACjBC,KAAM,QCDDC,EAAiB,SAACC,OACnBC,EAAc,MAEdD,EAAME,WAAY,KACfC,EAAQH,EAAME,WAAWE,cAAcT,EAASE,iBAElDM,IACHF,EAAcE,EAAME,kBAIfJ,GAGFK,EAAqB,SAACN,OACrBC,EAAcD,EAAMO,kBAAkBN,eAExCD,EAAME,WAAY,KACfC,EAAQH,EAAME,WAAWE,cAAcT,EAASE,iBAElDM,IACHA,EAAME,UAAYJ,KCpBfO,IAAYC,OAAOC,KAEnBC,EAAmB,SAACX,UACrBA,EAAMY,aAAa,aAAeJ,EACvB,GAAGK,MAAMC,KAAKd,EAAMe,OAChCC,IAAI,SAACC,UAASA,EAAKC,OAERC,KAAK,MAEXnB,EAAMoB,OAIf,SAASC,OACJC,KAAKpB,WAAY,KACdC,EAAQmB,KAAKpB,WAAWE,cAAcT,EAASE,iBAEjDM,IACHA,EAAME,UAAYM,EAAiBW,QAMtC,SAASC,SACHC,UAAUC,IAAI,SAIpB,SAASC,SACHF,UAAUG,OAAO,SAGvB,SAASC,YACFC,EAAiB,GAAGhB,MAAMC,KAAKQ,KAAKQ,iBAAiBnC,EAASC,aAE3DmC,EAAI,EAAGC,EAAMH,EAAeI,OAAQF,EAAIC,EAAKD,IACrDzB,EAAmBuB,EAAeE,IC/BpC,IAAMG,EACW,SADXA,EAEW,UAFXA,EAGW,WAHXA,EAIW,cAGS,CACzBC,wBACOC,EAAsB,GAAGvB,MAAMC,KAAKuB,SAASP,iBAAiBnC,EAASC,aACvE0C,EAAW,GAAGzB,MAAMC,KAAKuB,SAASP,iBAAiBnC,EAASG,OAEzDiC,EAAI,EAAGC,EAAMI,EAAoBH,OAAQF,EAAIC,EAAKD,IAAK,KACzD/B,EAAQoC,EAAoBL,GAElCQ,OAAOC,eAAexC,EAAO,oBAAqB,CACjDoB,MAAO,CACNnB,YAAaF,EAAeC,MAI9BA,EAAMyC,iBAAiBP,EAAmBb,GAC1CrB,EAAMyC,iBAAiBP,EAAoBX,GAC3CvB,EAAMyC,iBAAiBP,EAAqBR,OAGxC,IAAIK,EAAI,EAAGC,EAAMM,EAASL,OAAQF,EAAIC,EAAKD,IAC/CO,EAASP,GAAGU,iBAAiBP,EAAiBN,IAIhDc,2BACOJ,EAAW,GAAGzB,MAAMC,KAAKuB,SAASP,iBAAiBnC,EAASG,OAC5DsC,EAAsB,GAAGvB,MAAMC,KAAKuB,SAASP,iBAAiBnC,EAASC,aAC3E+C,OAAO,SAAC3C,WAAYA,EAAMO,oBAEnBwB,EAAI,EAAGC,EAAMI,EAAoBH,OAAQF,EAAIC,EAAKD,IAAK,KACzD/B,EAAQoC,EAAoBL,GAElCzB,EAAmBN,GAEnBA,EAAM4C,oBAAoBV,EAAmBb,GAC7CrB,EAAM4C,oBAAoBV,EAAoBX,GAC9CvB,EAAM4C,oBAAoBV,EAAqBR,OAG3C,IAAIK,EAAI,EAAGC,EAAMM,EAASL,OAAQF,EAAIC,EAAKD,IAC/CO,EAASP,GAAGa,oBAAoBV,EAAiBN"}