{"version":3,"file":"bs-custom-file-input.min.js","sources":["../src/selector.js","../src/util.js","../src/eventHandlers.js","../src/index.js"],"sourcesContent":["const Selector = {\n  CUSTOMFILE: '.custom-file input[type=\"file\"]',\n  CUSTOMFILELABEL: '.custom-file-label',\n  FORM: 'form',\n  INPUT: 'input',\n}\n\nexport default Selector\n","import Selector from './selector'\n\nconst textNodeType = 3\nconst getDefaultText = (input) => {\n  let defaultText = ''\n\n  const label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n  if (label) {\n    defaultText = label.innerHTML\n  }\n\n  return defaultText\n}\n\nconst findFirstChildNode = (element) => {\n  if (element.childNodes.length > 0) {\n    const childNodes = [].slice.call(element.childNodes)\n\n    for (let i = 0; i < childNodes.length; i++) {\n      const node = childNodes[i]\n      if (node.nodeType !== textNodeType) {\n        return node\n      }\n    }\n  }\n\n  return element\n}\n\nconst restoreDefaultText = (input) => {\n  const defaultText = input.bsCustomFileInput.defaultText\n  const label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n  if (label) {\n    const element = findFirstChildNode(label)\n    element.innerHTML = defaultText\n  }\n}\n\nexport {\n  getDefaultText,\n  findFirstChildNode,\n  restoreDefaultText,\n}\n","import { findFirstChildNode, restoreDefaultText } from './util'\nimport Selector from './selector'\n\nconst fileApi = !!window.File\n\nconst getSelectedFiles = (input) => {\n  if (input.hasAttribute('multiple') && fileApi) {\n    const files = [].slice.call(input.files)\n      .map((file) => file.name)\n\n    return files.join(', ')\n  }\n\n  return input.value\n}\n\nfunction handleInputChange() {\n  const label = this.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n  if (label) {\n    const element = findFirstChildNode(label)\n    element.innerHTML = getSelectedFiles(this)\n  }\n}\n\nfunction handleFormReset() {\n  const customFileList = [].slice.call(this.querySelectorAll(Selector.INPUT))\n    .filter((input) => !!input.bsCustomFileInput)\n\n  for (let i = 0, len = customFileList.length; i < len; i++) {\n    restoreDefaultText(customFileList[i])\n  }\n}\n\nexport {\n  handleInputChange,\n  handleFormReset,\n}\n","import { getDefaultText, restoreDefaultText } from './util'\nimport { handleFormReset, handleInputChange } from './eventHandlers'\nimport Selector from './selector'\n\nconst customProperty = 'bsCustomFileInput'\nconst Event = {\n  FORMRESET   : 'reset',\n  INPUTCHANGE : 'change',\n}\n\nconst bsCustomFileInput = {\n  init(inputSelector = Selector.CUSTOMFILE, formSelector = Selector.FORM) {\n    const customFileInputList = [].slice.call(document.querySelectorAll(inputSelector))\n    const formList = [].slice.call(document.querySelectorAll(formSelector))\n\n    for (let i = 0, len = customFileInputList.length; i < len; i++) {\n      const input = customFileInputList[i]\n\n      Object.defineProperty(input, customProperty, {\n        value: {\n          defaultText: getDefaultText(input),\n        },\n        writable: true,\n      })\n\n      input.addEventListener(Event.INPUTCHANGE, handleInputChange)\n    }\n\n    for (let i = 0, len = formList.length; i < len; i++) {\n      formList[i].addEventListener(Event.FORMRESET, handleFormReset)\n      Object.defineProperty(formList[i], customProperty, {\n        value: true,\n        writable: true,\n      })\n    }\n  },\n\n  destroy() {\n    const formList = [].slice.call(document.querySelectorAll(Selector.FORM))\n      .filter((form) => !!form.bsCustomFileInput)\n    const customFileInputList = [].slice.call(document.querySelectorAll(Selector.INPUT))\n      .filter((input) => !!input.bsCustomFileInput)\n\n    for (let i = 0, len = customFileInputList.length; i < len; i++) {\n      const input = customFileInputList[i]\n\n      restoreDefaultText(input)\n      input[customProperty] = undefined\n\n      input.removeEventListener(Event.INPUTCHANGE, handleInputChange)\n    }\n\n    for (let i = 0, len = formList.length; i < len; i++) {\n      formList[i].removeEventListener(Event.FORMRESET, handleFormReset)\n      formList[i][customProperty] = undefined\n    }\n  },\n}\n\nexport default bsCustomFileInput\n"],"names":["Selector","CUSTOMFILE","CUSTOMFILELABEL","FORM","INPUT","findFirstChildNode","element","childNodes","length","slice","call","i","node","nodeType","restoreDefaultText","input","defaultText","bsCustomFileInput","label","parentNode","querySelector","innerHTML","fileApi","window","File","getSelectedFiles","hasAttribute","files","map","file","name","join","value","handleInputChange","this","handleFormReset","customFileList","querySelectorAll","filter","len","customProperty","Event","init","inputSelector","formSelector","customFileInputList","document","formList","Object","defineProperty","writable","addEventListener","destroy","form","undefined","removeEventListener"],"mappings":";;;;;6LAAA,IAAMA,EAAW,CACfC,WAAY,kCACZC,gBAAiB,qBACjBC,KAAM,OACNC,MAAO,SCWHC,EAAqB,SAACC,MACM,EAA5BA,EAAQC,WAAWC,eACfD,EAAa,GAAGE,MAAMC,KAAKJ,EAAQC,YAEhCI,EAAI,EAAGA,EAAIJ,EAAWC,OAAQG,IAAK,KACpCC,EAAOL,EAAWI,MAlBT,IAmBXC,EAAKC,gBACAD,SAKNN,GAGHQ,EAAqB,SAACC,OACpBC,EAAcD,EAAME,kBAAkBD,YACtCE,EAAQH,EAAMI,WAAWC,cAAcpB,EAASE,iBAElDgB,IACcb,EAAmBa,GAC3BG,UAAYL,ICjClBM,IAAYC,OAAOC,KAEnBC,EAAmB,SAACV,UACpBA,EAAMW,aAAa,aAAeJ,EACtB,GAAGb,MAAMC,KAAKK,EAAMY,OAC/BC,IAAI,SAACC,UAASA,EAAKC,OAETC,KAAK,MAGbhB,EAAMiB,OAGf,SAASC,QACDf,EAAQgB,KAAKf,WAAWC,cAAcpB,EAASE,iBAEjDgB,IACcb,EAAmBa,GAC3BG,UAAYI,EAAiBS,OAIzC,SAASC,YACDC,EAAiB,GAAG3B,MAAMC,KAAKwB,KAAKG,iBAAiBrC,EAASI,QACjEkC,OAAO,SAACvB,WAAYA,EAAME,oBAEpBN,EAAI,EAAG4B,EAAMH,EAAe5B,OAAQG,EAAI4B,EAAK5B,IACpDG,EAAmBsB,EAAezB,IC1BtC,IAAM6B,EAAiB,oBACjBC,EACU,QADVA,EAEU,eAGU,CACxBC,cAAKC,EAAqCC,YAArCD,IAAAA,EAAgB3C,EAASC,qBAAY2C,IAAAA,EAAe5C,EAASG,cFR5CY,EAClBC,EAEEE,EEME2B,EAAsB,GAAGpC,MAAMC,KAAKoC,SAAST,iBAAiBM,IAC9DI,EAAW,GAAGtC,MAAMC,KAAKoC,SAAST,iBAAiBO,IAEhDjC,EAAI,EAAG4B,EAAMM,EAAoBrC,OAAQG,EAAI4B,EAAK5B,IAAK,KACxDI,EAAQ8B,EAAoBlC,GAElCqC,OAAOC,eAAelC,EAAOyB,EAAgB,CAC3CR,MAAO,CACLhB,aFjBcD,EEiBcA,EFhBhCC,OAAAA,OAEEE,EAFFF,EAAc,GAEZE,EAAQH,EAAMI,WAAWC,cAAcpB,EAASE,iBAElDgB,IACFF,EAAcE,EAAMG,WAGfL,IEUDkC,UAAU,IAGZnC,EAAMoC,iBAAiBV,EAAmBR,OAGvC,IAAItB,EAAI,EAAG4B,EAAMQ,EAASvC,OAAQG,EAAI4B,EAAK5B,IAC9CoC,EAASpC,GAAGwC,iBAAiBV,EAAiBN,GAC9Ca,OAAOC,eAAeF,EAASpC,GAAI6B,EAAgB,CACjDR,OAAO,EACPkB,UAAU,KAKhBE,2BACQL,EAAW,GAAGtC,MAAMC,KAAKoC,SAAST,iBAAiBrC,EAASG,OAC/DmC,OAAO,SAACe,WAAWA,EAAKpC,oBACrB4B,EAAsB,GAAGpC,MAAMC,KAAKoC,SAAST,iBAAiBrC,EAASI,QAC1EkC,OAAO,SAACvB,WAAYA,EAAME,oBAEpBN,EAAI,EAAG4B,EAAMM,EAAoBrC,OAAQG,EAAI4B,EAAK5B,IAAK,KACxDI,EAAQ8B,EAAoBlC,GAElCG,EAAmBC,GACnBA,EAAMyB,QAAkBc,EAExBvC,EAAMwC,oBAAoBd,EAAmBR,OAG1C,IAAItB,EAAI,EAAG4B,EAAMQ,EAASvC,OAAQG,EAAI4B,EAAK5B,IAC9CoC,EAASpC,GAAG4C,oBAAoBd,EAAiBN,GACjDY,EAASpC,GAAG6B,QAAkBc"}