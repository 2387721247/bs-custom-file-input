{"version":3,"file":"bs-custom-file-input.js","sources":["../src/selector.js","../src/util.js","../src/eventHandlers.js","../src/index.js"],"sourcesContent":["const Selector = {\n\tCUSTOMFILE: '.custom-file input[type=\"file\"]',\n\tCUSTOMFILELABEL: '.custom-file-label',\n\tFORM: 'form'\n}\n\nexport default Selector\n","import Selector from './selector'\n\nconst getDefaultText = (input) => {\n\tlet defaultText = ''\n\n\tif (input.parentNode) {\n\t\tconst label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n\t\tif (label) {\n\t\t\tdefaultText = label.innerHTML\n\t\t}\n\t}\n\n\treturn defaultText\n}\n\nconst restoreDefaultText = (input) => {\n\tconst defaultText = input.bsCustomFileInput.defaultText\n\n\tif (input.parentNode) {\n\t\tconst label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n\t\tif (label) {\n\t\t\tlabel.innerHTML = defaultText\n\t\t}\n\t}\n}\n\nexport {\n\tgetDefaultText,\n\trestoreDefaultText,\n}\n","import { restoreDefaultText } from './util'\nimport Selector from './selector'\n\nconst fileApi = !!window.File\n\nconst getSelectedFiles = (input) => {\n\tif (input.hasAttribute('multiple') && fileApi) {\n\t\tconst files = [].slice.call(input.files)\n\t\t\t.map((file) => file.name)\n\n\t\treturn files.join(', ')\n\t} else {\n\t\treturn input.value\n\t}\n}\n\nfunction handleInputChange() {\n\tif (this.parentNode) {\n\t\tconst label = this.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n\t\tif (label) {\n\t\t\tlabel.innerHTML = getSelectedFiles(this)\n\t\t}\n\t}\n}\n\n// Needed for keyboard users in firefox\nfunction handleFocusin() {\n\tthis.classList.add('focus')\n}\n\n// Needed for keyboard users in firefox\nfunction handleFocusout() {\n\tthis.classList.remove('focus')\n}\n\nfunction handleFormReset() {\n\tconst customFileList = [].slice.call(this.querySelectorAll(Selector.CUSTOMFILE))\n\n\tfor (let i = 0, len = customFileList.length; i < len; i++) {\n\t\trestoreDefaultText(customFileList[i])\n\t}\n}\n\nexport {\n\thandleInputChange,\n\thandleFocusin,\n\thandleFocusout,\n\thandleFormReset,\n}\n","import {\n\thandleInputChange,\n\thandleFocusin,\n\thandleFocusout,\n\thandleFormReset,\n} from './eventHandlers'\nimport { getDefaultText, restoreDefaultText } from './util'\nimport Selector from './selector'\n\nconst Event = {\n\tINPUTCHANGE   : 'change',\n\tINPUTFOCUSIN  : 'focusin',\n\tINPUTFOCUSOUT : 'focusout',\n\tFORMRESET     : 'reset',\n}\n\nconst bsCustomFileInput = {\n\tinit() {\n\t\tconst customFileInputList = [].slice.call(document.querySelectorAll(Selector.CUSTOMFILE))\n\t\tconst formList = [].slice.call(document.querySelectorAll(Selector.FORM))\n\n\t\tfor (let i = 0, len = customFileInputList.length; i < len; i++) {\n\t\t\tconst input = customFileInputList[i]\n\n\t\t\tObject.defineProperty(input, 'bsCustomFileInput', {\n\t\t\t\tvalue: {\n\t\t\t\t\tdefaultText: getDefaultText(input)\n\t\t\t\t},\n\t\t\t})\n\n\t\t\tinput.addEventListener(Event.INPUTCHANGE, handleInputChange)\n\t\t\tinput.addEventListener(Event.INPUTFOCUSIN, handleFocusin)\n\t\t\tinput.addEventListener(Event.INPUTFOCUSOUT, handleFocusout)\n\t\t}\n\n\t\tfor (let i = 0, len = formList.length; i < len; i++) {\n\t\t\tformList[i].addEventListener(Event.FORMRESET, handleFormReset)\n\t\t}\n\t},\n\n\tdestroy() {\n\t\tconst formList = [].slice.call(document.querySelectorAll(Selector.FORM))\n\t\tconst customFileInputList = [].slice.call(document.querySelectorAll(Selector.CUSTOMFILE))\n\t\t\t.filter((input) => !!input.bsCustomFileInput)\n\n\t\tfor (let i = 0, len = customFileInputList.length; i < len; i++) {\n\t\t\tconst input = customFileInputList[i]\n\n\t\t\trestoreDefaultText(input)\n\n\t\t\tinput.removeEventListener(Event.INPUTCHANGE, handleInputChange)\n\t\t\tinput.removeEventListener(Event.INPUTFOCUSIN, handleFocusin)\n\t\t\tinput.removeEventListener(Event.INPUTFOCUSOUT, handleFocusout)\n\t\t}\n\n\t\tfor (let i = 0, len = formList.length; i < len; i++) {\n\t\t\tformList[i].removeEventListener(Event.FORMRESET, handleFormReset)\n\t\t}\n\t}\n}\n\nexport default bsCustomFileInput\n"],"names":["Selector","CUSTOMFILE","CUSTOMFILELABEL","FORM","getDefaultText","input","defaultText","parentNode","label","querySelector","innerHTML","restoreDefaultText","bsCustomFileInput","fileApi","window","File","getSelectedFiles","hasAttribute","files","slice","call","map","file","name","join","value","handleInputChange","handleFocusin","classList","add","handleFocusout","remove","handleFormReset","customFileList","querySelectorAll","i","len","length","Event","INPUTCHANGE","INPUTFOCUSIN","INPUTFOCUSOUT","FORMRESET","init","customFileInputList","document","formList","Object","defineProperty","addEventListener","destroy","filter","removeEventListener"],"mappings":"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"}